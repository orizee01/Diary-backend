let db,CustomerQueries,generateToken;_a3e‍.x([["default",()=>CustomerService]]);_a3e‍.w("../../setup/index",[["default",["db"],function(v){db=v}]]);_a3e‍.w("./customer.queries",[["default",["CustomerQueries"],function(v){CustomerQueries=v}]]);_a3e‍.w("../../../utils/helper",[["generateToken",["generateToken"],function(v){generateToken=v}]]);



               class CustomerService {
  /**
   * Fetches a customer using email
   * @memberof CustomerService
   * @param {string} email - The email of the customer
   * @returns { Promise<Object | Error> } A promise that resolves or rejects
   * with an Object of the customer resource or a DB Error.
  */
  static async getCustomerByEmail(email) {
    return db.oneOrNone(CustomerQueries.findCustomer, [email]);
  }

  /**
   * creates a customer
   * @memberof CustomerService
   * @param {string} data - The details of the new customer
   * @returns { Promise<Object | Error> } A promise that resolves or rejects
   * with an Object of the customer resource or a DB Error.
  */
  static async createCustomer(data) {
    const { name, email, password, role } = data;

    const reference = generateToken(10);
    const customer = await db.one(CustomerQueries.saveCustomer, [
      name,
      email,
      password,
      role,
      reference
    ]);

    return customer;
  }
}
