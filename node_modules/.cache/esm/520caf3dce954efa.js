let _,CustomerService,Helpers,Response;_ce9‍.x([["default",()=>_ce9‍.o]]);_ce9‍.w("lodash",[["default",["_"],function(v){_=v}]]);_ce9‍.w("./customer.service",[["default",["CustomerService"],function(v){CustomerService=v}]]);_ce9‍.w("../../../utils/helper",[["default",["Helpers"],function(v){Helpers=v}]]);_ce9‍.w("../../",[["Response",["Response"],function(v){Response=v}]]);/* eslint-disable import/no-named-as-default-member */
// eslint-disable-next-line import/no-extraneous-dependencies





/**
 * controllers that contains methods for managing customer endpoints
 * @class CustomerController
 */
class CustomerController {
  static async CustomerController(req, res) {
    // Destructure only the required field
    const { name, email, password, role } = req.body;

    // Normalize the email
    const trimmedEmail = email ? email.trim().toLowerCase() : null;

    // check if email already exists
    const customerExist = await _ce9‍.a("CustomerService",CustomerService).getCustomerByEmail({ email: trimmedEmail });
    if (customerExist) {
      return _ce9‍.a("Response",Response).error(res, 'Accout exist, Kindly proceed to the login Screen', 409);
    }
    // hashed the data before storing
    const hashedPassword = await _ce9‍.a("Helpers",Helpers).hashPassword(password);

    // Prepare the customer data for creation
    const CustomerData = {
      name,
      email: trimmedEmail,
      password: hashedPassword,
      role
    };

    // Create new Customer

    const customer = await _ce9‍.a("CustomerService",CustomerService).createCustomer(CustomerData);

    // send response with limited customer details
    _ce9‍.a("Response",Response).info(res, 'User created successfully!', 201, _ce9‍.a("_",_).pick(customer, ['name', 'role']));
  }
}
_ce9‍.d(CustomerController);
